# 柔術テクニック管理アプリ 要件定義書

## 1. プロジェクト概要

### 1.1 アプリ名
**Your BJJ**（仮）

### 1.2 コンセプト
柔術の技とコンビネーションを視覚的に管理し、練習の記録と仲間との共有を通じて上達を加速させるアプリ

### 1.3 ターゲットユーザー
- 柔術を継続的に練習している人（白帯〜黒帯）
- 技の体系化・整理をしたい人
- ジム仲間と技を共有したい人

---

## 2. 機能要件

### 2.1 技（テクニック）管理

#### 2.1.1 技の登録
| 項目 | 必須 | 説明 |
|------|------|------|
| 技名 | ◯ | 日本語・英語・ポルトガル語対応 |
| カテゴリ | ◯ | ポジション/ガード種別（後述） |
| 技の種類 | ◯ | スイープ/パス/サブミッション/エスケープ/テイクダウン等 |
| 説明文 | - | 自由記述（ポイント、注意点など） |
| 動画 | - | 自撮り動画 or YouTube URL |
| タグ | - | 自由タグ（例: #三角絞め系, #ノーギ向き） |
| 難易度 | - | 初級/中級/上級（任意） |
| 習得状況 | - | 練習中/習得済み/得意技 |

#### 2.1.2 カテゴリ管理
**プリセットカテゴリ（ポジション別）:**

| 大分類 | 小分類（例） |
|--------|-------------|
| ガード（ボトム） | クローズドガード、ハーフガード、オープンガード、デラヒーバ、スパイダー、ラッソー、Xガード、50/50、リバースデラヒーバ |
| トップポジション | サイドコントロール、マウント、バック、ニーオンベリー、ノースサウス |
| スタンド | 組み手、テイクダウン、引き込み |
| タートル | 攻め側、守り側 |
| レッグロック | アシガラミ、サドル、外ヒール、内ヒール |

- ユーザーは**カスタムカテゴリを追加可能**
- カテゴリの並び替え・編集・削除も可能

---

### 2.2 コンビネーション（フロー）機能

#### 2.2.1 フローエディタ
ドラッグ&ドロップでコンビネーションを作成するビジュアルエディタ

**基本仕様:**
- 技カードをキャンバスにドラッグして配置
- 技同士を矢印（エッジ）で接続
- 線形フロー: A → B → C
- **分岐フロー**: 相手の反応によってルートが分かれる

```
例: 三角絞めからのコンビネーション

[クローズドガード]
      ↓
[三角絞めセットアップ]
      ↓
   ┌──┴──┐
   ↓      ↓
[相手が姿勢を起こす] [相手が潜ってくる]
   ↓      ↓
[三角絞め]   [オモプラータ]
```

**分岐の表現:**
| 要素 | 説明 |
|------|------|
| 条件ラベル | 矢印に「相手が〇〇したら」等のラベルを付与 |
| 色分け | 成功ルート（緑）、相手の防御対応ルート（オレンジ）など |
| ノート | 各接続に補足メモを追加可能 |

#### 2.2.2 フロー管理
- フローに名前・説明・タグを付けて保存
- 一覧表示（カード形式/リスト形式）
- 検索・フィルタリング（カテゴリ、タグ、作成日）
- お気に入り登録

---

### 2.3 共有機能

#### 2.3.1 ジム/グループ
| 機能 | 説明 |
|------|------|
| グループ作成 | ジム名、説明、アイコンを設定 |
| 招待制 | **管理者が招待リンク or メールで招待** |
| 役割 | 管理者（招待・削除権限）/ メンバー |
| 複数所属 | 1ユーザーが複数グループに所属可能 |

#### 2.3.2 共有対象
- **コンビネーション（フロー）のみ共有可能**
- 練習日記は共有対象外（プライベート）

#### 2.3.3 共有の仕組み
- フローの「共有」ボタンから所属グループを選択
- 共有されたフローはグループ内で閲覧可能
- 共有フローは「コピーして自分用に編集」可能
- コメント機能（任意: 将来拡張）

---

### 2.4 練習日記

#### 2.4.1 日記の登録項目
| 項目 | 必須 | 説明 |
|------|------|------|
| 日付 | ◯ | 練習日 |
| 練習時間 | - | 開始〜終了 or 時間数 |
| 練習内容 | - | 自由記述 |
| 使った技 | - | 登録済みの技からリンク |
| 試したコンビネーション | - | 登録済みフローからリンク |
| 気づき・反省 | - | 自由記述 |
| コンディション | - | 体調、疲労度（5段階など） |
| スパーリング結果 | - | 勝敗、相手の帯色など（任意） |

#### 2.4.2 振り返り機能
- **カレンダー表示**: 月間/週間で練習日を可視化
- **統計ダッシュボード**:
  - 月間練習回数・時間
  - よく使う技ランキング
  - 練習頻度の推移グラフ
- **検索**: キーワード、日付範囲、技名で検索

---

### 2.5 ユーザー管理

#### 2.5.1 アカウント
- メールアドレス + パスワード登録
- ソーシャルログイン（Google, Apple）対応検討

#### 2.5.2 プロフィール
| 項目 | 説明 |
|------|------|
| 表示名 | ニックネーム |
| アイコン | プロフィール画像 |
| 帯色 | 白/青/紫/茶/黒 + 帯上のストライプ数 |
| 柔術歴 | 開始年月 |
| 所属ジム | グループ参加で自動表示 or 手動入力 |
| 自己紹介 | 自由記述 |

---

## 3. 動画保存方式の選択肢

自撮り動画の保存方法について、以下の選択肢があります。

### 3.1 比較表

| 方式 | メリット | デメリット | コスト感 |
|------|----------|------------|----------|
| **A. サーバー保存** | シンプルなUX、オフライン再生可能 | ストレージコスト高、容量制限必要 | 高 |
| **B. クラウド連携（Google Drive等）** | ストレージコスト削減、ユーザー管理 | 連携設定が必要、権限管理複雑 | 低〜中 |
| **C. YouTube限定公開** | 無料、無制限 | アップロード手間、プライバシー懸念 | 無料 |
| **D. ハイブリッド** | 柔軟性高い | 実装複雑 | 中 |

### 3.2 推奨案

**フェーズ1（MVP）:**
- YouTube URL埋め込みのみ対応
- 自撮り動画は「YouTube限定公開でアップ → URLを登録」の運用

**フェーズ2（拡張）:**
- クラウドストレージ連携（Google Drive / iCloud）
- または自社ストレージ（容量制限付き）

---

## 4. 非機能要件

### 4.1 対応プラットフォーム

**Phase 1: Webアプリ（PWA対応）**
- React / Next.js でWebアプリを構築
- PWA化でスマホのホーム画面に追加可能
- 素早くリリースして検証

**Phase 2以降: モバイルアプリ展開**
- React Native または Flutter でネイティブアプリ化
- Web版で検証したUI/ロジックを活用
- ストア配布で認知度向上

### 4.2 その他
- オフライン対応: 技・フローの閲覧はオフラインでも可能に
- データエクスポート: 自分のデータをJSON/CSV出力
- 多言語対応: 日本語 / 英語（将来）

---

## 5. 画面構成（案）

```
📱 アプリ構成

├── 🏠 ホーム
│   ├── 最近の練習日記
│   ├── よく使う技
│   └── 共有された新着フロー
│
├── 📚 技ライブラリ
│   ├── カテゴリ別一覧
│   ├── 技詳細
│   └── 技の追加/編集
│
├── 🔀 コンビネーション
│   ├── フロー一覧
│   ├── フローエディタ（D&D）
│   └── 共有フロー
│
├── 📓 練習日記
│   ├── カレンダー表示
│   ├── 日記一覧
│   ├── 日記作成/編集
│   └── 統計
│
├── 👥 グループ
│   ├── 所属グループ一覧
│   ├── グループ詳細
│   ├── メンバー管理（管理者）
│   └── 共有フロー一覧
│
└── ⚙️ 設定
    ├── プロフィール
    ├── アカウント
    └── データエクスポート
```

---

## 6. 開発フェーズ（案）

### Phase 1: MVP（最小実用版）
- [ ] ユーザー登録・ログイン
- [ ] 技の登録・一覧・カテゴリ管理
- [ ] YouTube動画埋め込み
- [ ] 基本的なフローエディタ（線形のみ）
- [ ] 練習日記（基本機能）

### Phase 2: コア機能完成
- [ ] フローエディタ分岐対応
- [ ] グループ・招待機能
- [ ] フロー共有機能
- [ ] 統計ダッシュボード

### Phase 3: 拡張
- [ ] 自撮り動画アップロード
- [ ] オフライン対応
- [ ] 通知機能
- [ ] 多言語対応

---

## 7. 決定事項・未決定事項

### 決定済み
| 項目 | 決定内容 |
|------|----------|
| アプリ名 | Your BJJ（仮） |
| プラットフォーム | Phase 1: Webアプリ（PWA）→ Phase 2以降: モバイル展開 |
| 公開方針 | 最初は個人利用、将来的に公開を視野 |

### 未決定
| 項目 | 選択肢 | 決定期限 |
|------|--------|----------|
| 動画保存方式 | YouTube限定 / クラウド連携 / サーバー | Phase 2開始前 |
| 収益モデル（公開時） | 無料 / フリーミアム / サブスク | 公開検討時 |
| 技術スタック | 次セクション参照 | 開発開始前 |

---

## 8. 技術スタック提案

### 8.1 フロントエンド

| 選択肢 | 特徴 | おすすめ度 |
|--------|------|-----------|
| **Next.js (React)** | SSR/SSG対応、Vercelで簡単デプロイ、エコシステム豊富 | ⭐⭐⭐ |
| Nuxt.js (Vue) | Vueベース、学習コストやや低め | ⭐⭐ |
| SvelteKit | 軽量・高速、エコシステムはまだ発展中 | ⭐⭐ |

**推奨: Next.js**
- React Nativeへの移行時に知識が活かせる
- フローエディタ用ライブラリが豊富（React Flow等）

### 8.2 バックエンド

| 選択肢 | 特徴 | おすすめ度 |
|--------|------|-----------|
| **Supabase** | PostgreSQL + 認証 + ストレージ、Firebase代替、無料枠あり | ⭐⭐⭐ |
| Firebase | Googleサービス、NoSQL、リアルタイム同期 | ⭐⭐ |
| 自前API (FastAPI/Express) | 柔軟性高い、インフラ管理必要 | ⭐ |

**推奨: Supabase**
- PostgreSQLでリレーショナルデータに強い（技・カテゴリの関係など）
- 認証・ストレージ・リアルタイム機能が統合済み
- 個人開発→公開へのスケールが容易

### 8.3 フローエディタ（ドラッグ&ドロップ）

| ライブラリ | 特徴 |
|------------|------|
| **React Flow** | ノードベースエディタの定番、カスタマイズ性◎、分岐対応 |
| xyflow | React Flowの新名称（同一ライブラリ） |
| JointJS | 高機能だが有料版推奨 |

**推奨: React Flow**
- 分岐フロー、条件ラベル、ズーム/パン全て対応
- ドキュメント充実、コミュニティ活発

### 8.4 推奨構成まとめ

```
┌─────────────────────────────────────────────┐
│  フロントエンド                              │
│  Next.js + TypeScript + Tailwind CSS        │
│  + React Flow（フローエディタ）              │
├─────────────────────────────────────────────┤
│  バックエンド / インフラ                     │
│  Supabase (PostgreSQL + Auth + Storage)     │
├─────────────────────────────────────────────┤
│  ホスティング                               │
│  Vercel（フロントエンド）                   │
│  Supabase Cloud（バックエンド）             │
└─────────────────────────────────────────────┘
```

### 8.5 コスト見積もり（個人利用〜小規模公開）

| サービス | 無料枠 | 有料時の目安 |
|----------|--------|--------------|
| Vercel | 月100GB帯域、無制限デプロイ | Pro: $20/月〜 |
| Supabase | 500MB DB、1GB Storage、50K MAU | Pro: $25/月〜 |

**個人利用フェーズは完全無料で運用可能**

---

## 9. 次のステップ

1. **技術スタックの確定** - 上記推奨構成でOKか確認
2. **DB設計** - テーブル構造の設計
3. **ワイヤーフレーム作成** - 主要画面のUI設計
4. **Phase 1の詳細タスク分解** - 開発チケット化

---

*作成日: 2025年1月*
*最終更新: 2025年1月*
